<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>你行你搬啊</title>
    <link rel="icon" type="image/GIF" href="res/brick.ico"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="full-screen" content="yes"/>
    <meta name="screen-orientation" content="portrait"/>
    <meta name="x5-fullscreen" content="true"/>
    <meta name="360-fullscreen" content="true"/>
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />
    <style>
        body, canvas, div {
            -moz-user-select: none;
            -webkit-user-select: none;
            -ms-user-select: none;
            -khtml-user-select: none;
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
        }

        #loading{
            color:white;
            font-size: 40px;
            text-align: center;
        }
    </style>

    <script>



//        var Wechat = {
//
//            imgUrl: 'http://leehey.org/skyscraper/res/brick.png',
//            lineLink:  'http://leehey.org/skyscraper/',
//            descContent: "你行你搬啊",
//            shareTitle: "搬砖不易，且行且珍惜，致敬各个搬砖行业！"
//        };
//
//        function shareFriend(imgUrl1, lineLink1, descContent1, shareTitle1) {
//
//            var imgUrl = Wechat.imgUrl;
//            var lineLink = lineLink1;
//            var descContent = descContent1;
//            var shareTitle = shareTitle1;
//
//            WeixinJSBridge.invoke('sendAppMessage',{
//                "img_url": Wechat.imgUrl,
//                "img_width": "640",
//                "img_height": "640",
//                "link": lineLink,
//                "desc": descContent,
//                "title": shareTitle
//            }, function(res) {
//                _report('send_msg', res.err_msg);
//            })
//        }
//        function shareTimeline(imgUrl1, lineLink1, descContent1, shareTitle1) {
//
//            var imgUrl = Wechat.imgUrl;
//            var lineLink = lineLink1;
//            var descContent = descContent1;
//            var shareTitle = shareTitle1;
//
////            alert(navigator.userAgent);
//
//            if (navigator.userAgent.indexOf("MicroMessenger") > -1 && typeof WeixinJSBridge !== undefined){
//
//                WeixinJSBridge.invoke('shareTimeline',{
//                    "img_url": Wechat.imgUrl,
//                    "img_width": "640",
//                    "img_height": "640",
//                    "link": lineLink,
//                    "desc": descContent,
//                    "title": shareTitle
//                }, function(res) {
//                    _report('timeline', res.err_msg);
//                });
//
//                return true;
//
//            }
//
//            return false;
//        }
//        function shareWeibo() {
//            WeixinJSBridge.invoke('shareWeibo',{
//                "content": descContent,
//                "url": lineLink
//            }, function(res) {
//                _report('weibo', res.err_msg);
//            });
//        }
//        // 当微信内置浏览器完成内部初始化后会触发WeixinJSBridgeReady事件。
//        document.addEventListener('WeixinJSBridgeReady', function onBridgeReady() {
//
//            if (GameResultLayer != undefined){
//                Wechat.shareTitle = GameResultLayer.Msg;
//            }
//
//            // 发送给好友
//            WeixinJSBridge.on('menu:share:appmessage', function(argv){
//                shareFriend(Wechat.imgUrl, Wechat.lineLink, Wechat.descContent, Wechat.shareTitle);
//            });
//
//            // 分享到朋友圈
//            WeixinJSBridge.on('menu:share:timeline', function(argv){
//
//                shareTimeline(Wechat.imgUrl, Wechat.lineLink, Wechat.descContent, Wechat.shareTitle);
//
////                if (shareTimeline(imgUrl, lineLink, descContent, shareTitle))
////                {
////                    window.location = "http://mp.weixin.qq.com/s?__biz=MjM5MTA0NzU1NQ==&mid=200749859&idx=1&sn=41893ee9ad1221ec9a79d7a9c3e49f2a&scene=1#rd";
////                }
//
//            });
//
//
//
//            // 分享到微博
//            WeixinJSBridge.on('menu:share:weibo', function(argv){
//                shareWeibo();
//            });
//        }, false);

        var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
        document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Ff39a6826699ed2389a3a6f1f6ab96768' type='text/javascript'%3E%3C/script%3E"));


    </script>

</head>
<body style="padding:0; margin: 0; background: #000;">
<div id="loading">
    正全力为你加载...
</div>
<canvas id="gameCanvas" width="400" height="600"></canvas>

<script src="game.min.js"></script>
<script src="WeixinApi.js"></script>
<img width="500" height="500" style="position:absolute;top:-10000px;" src="http://leehey.org/skyscraper/res/brick.png">

<script>
    // 微信分享的数据
    window.wxData = {
        "appId": "", // 服务号可以填写appId
        "imgUrl":'http://leehey.org/skyscraper/res/brick.png',
        "link":'http://leehey.org/skyscraper/',
        "desc":"搬砖不易，且行且珍惜，致敬各个搬砖行业！",
        "title":"你行你搬啊"
    };

    function share(msg){
//            if(m == 0){
//                document.title = window.wxData.desc = "跑啊，跑神马？你是我的小羊驼～～～";
//            }
//            if(m == 1){
//                document.title = window.wxData.desc = "继续刷屏！"+step+"步推倒我的小羊驼，打败"+percent+"%朋友圈的人！你能超过我吗？";
//            }
//            if(m == 2){
//                document.title = window.wxData.desc = "我滴小羊驼呀它又跑掉了，T_T 快帮我抓回来！";
//            }

        document.title = window.wxData.desc = msg;
    };

    WeixinApi.ready(function(Api) {

        // 分享的回调
        var wxCallbacks = {
            ready : function() {

            },

            cancel : function(resp) {

            },
            fail : function(resp) {

            },
            confirm : function(resp) {

            },
            all : function(resp) {

            }
        };

        Api.shareToFriend(wxData, wxCallbacks);

        Api.shareToTimeline(wxData, wxCallbacks);

        Api.shareToWeibo(wxData, wxCallbacks);
    });
</script>
</body>
</html>